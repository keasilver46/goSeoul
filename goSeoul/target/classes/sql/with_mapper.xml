<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="withns">
    <!-- 게시물 총 개수 구하기 -->
    <select id="with_count" resultType="int">
        select count(*) from withgo
    </select>

    <!-- 게시판 목록 -->
    <select id="with_list" parameterType="int" resultType="with">
        <![CDATA[
		select * from (select rownum rnum, with1.* from
		(select * from withgo order by with_no desc) with1)
		where rnum >= ((#{page}-1) * 8 + 1)  and rnum <= (#{page} * 8)
		]]>
    </select>

    <!-- 게시판 내용보기 -->
    <select id="with_detail" parameterType="int" resultType="with">
        select * from withgo where with_no = #{with_no}
    </select>

    <!-- 게시판 조회수 증가 -->
    <update id="hit" parameterType="int">
        update withgo set with_hit = with_hit + 1 where with_no = #{with_no}
    </update>
</mapper>